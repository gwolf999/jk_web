define("wiseindex/lib/sf/activity",function(){var f=function(){var i=this;var h=B.log;i._scopeList={create:function(){},start:function(){},stop:function(){},destroy:function(){},view:"lib/sf/view"}};function e(k,i){var h=this;var j=$.Deferred();var i=i.routeScope;var l=$.Deferred();require([h._scopeList.view],function(m){h._view=new m();l.resolve()});$.when(l).then(g(h._scopeList.create,h,[i,h._view])).then(function(){h._view.render();return h._view.create(i)}).always(function(){j.resolve()});return j.promise()}function d(k,i){var h=this;var j=$.Deferred();var i=i.routeScope;$.when(g(h._scopeList.start,h,[i,h._view])).then(function(){return h._view.start(i)}).always(function(){j.resolve()});return j.promise()}function c(k,i){var h=this;var j=$.Deferred();var i=i.routeScope;$.when(g(h._scopeList.stop,h,[i,h._view])).then(function(){return h._view.stop(i)}).always(function(){j.resolve()});return j.promise()}function b(k,i){var h=this;var j=$.Deferred();var i=i.routeScope;$.when(g(h._scopeList.destroy,h,[i,h._view])).then(function(){return h._view.destroy(i)}).always(function(){if(!h._view.options.holdView){h._view=null}j.resolve()});return j.promise()}function g(j,i,h){return j.apply(i,h)}function a(i,j){var h=this;h._scopeList[i]=j}f.prototype={constructor:f,on:a,create:e,start:d,stop:c,destroy:b,change:function(){},resume:function(){}};return f});define("wiseindex/lib/sf/route",function(){var b=function(){var n={};var j,o=false;var c=["iact"];var f="natural";var d={last:{},path:"",params:null,routeStatus:{action:"history",type:"natural"}};var m;function h(x,y){f="virtual";d.routeStatus={action:"push",type:"virtual"};var w=x;if(!w){return}if(x=="base"){for(var v in c){j.remove(c[v])}}else{j.set(x,y)}}function p(){f="virtual";d.routeStatus={action:"back",type:"virtual"};history.back()}function s(v,w){}function k(x,w){var v={};if(typeof w==="function"){v.doActivity=w}if(typeof w==="object"){v.doActivity=w["do"];v.beforeActivity=w.before;v.afterActivity=w.after;v.destroy=w.destroy;v.ready=w.ready}m.regist(x,v)}function t(v){m.remove(v)}function l(w){var v=w.match(/#(.*)$/);var x=v?v[0]:"";x=x.slice(1);return x||""}function e(v,y){var z=y;var w=new RegExp(v+"\\=(.*?)(\\&|$)");var x=y.match(w)||false;if(x&&x[1]){return x[1]}else{return false}}function u(A){var w=A.split("&");var y={};var z;var v;for(var x in w){z=w[x];if(z!=""){v=z.split("=");if(v.length==2){y[v[0]]=decodeURIComponent(v[1])}if(v.length==3){y[v[0]]=decodeURIComponent(v[1])+"="+decodeURIComponent(v[2])}}}return y}function q(A,w,z,D){var C,y,x,v;D.forEach(function(F){var E=F.type;if(E=="removed"||E=="modified"){y=F.key;v=F.oldValue}if(E=="added"||E=="modified"){C=F.key;x=F.newValue}});d.last={path:y||"base",params:v};d.path=C||"base";d.params=x;m.run(d.path,d).then(function(){f="natural";d.routeStatus={action:"history",type:"natural"}});n.path=d.path;n.params=d.params}function r(){require(["wiseindex/lib/sf/controller"],function(v){m=v})}function g(){if(!(j=B.hash)||o===true){return}j.on("change",q);var w=u(l(location.href));var x={last:{path:"",params:""},path:"",params:""};for(var v in w){x.params=w[v];x.path=v;m.run(v,x).then(function(){f="natural"});n.path=v;n.params=w[v]}o=true}function i(){var w=u(l(location.href));var y="#page";for(var v in w){if(v=="iact"&&!$("#activitystyle")){var x=document.createElement("style");x.id="activitystyle";x.innerHTML=y+"{width:100%;position:absolute;top:-99999px;visibility:hidden;}";document.head.appendChild(x);break}}}i();return{push:h,replace:s,on:k,init:r,start:g,back:p,current:n,remove:t}};var a=new b();if(!window.B.route){window.B.route=a}return a});define("wiseindex/lib/sf/controller",function(){var d={};var c={};d.regist=function(g,h){var f=this.create(h);c[g]=f};d.create=function(f){return e(f)};d.run=function(h,i,j){proxyList=[];var g=new b();if(c.hasOwnProperty(h)){var f=c[h];g.push(f.beforeActivity,f,i);g.push(f.doActivity,f,i);g.push(f.afterActivity,f,i)}if(c.hasOwnProperty(h)&&h!==(i.last&&i.last.path)){g.push(a,this,i.last.path,i)}if(c.hasOwnProperty(h)){g.push(f.ready,f,i)}return g.excute()};function b(){var g=[];function h(){deferred=$.Deferred();deferred.resolve();$.each(g,function(){var i=this;deferred=deferred.then(function(){return i()})});g=[];return deferred}function f(k,j){var i=(2 in arguments)&&(Array.prototype.slice.call(arguments,2));if(typeof k==="function"){g.push(function(){return k.apply(j,i?i:[])})}}return{push:f,excute:h}}d.remove=function(f){if(c.hasOwnProperty(f)){delete c[f]}};function a(g,h){if(c.hasOwnProperty(g)){var f=c[g];f.destroy(h)}}var e=function(f){var g={};g.doActivity=f.doActivity||function(){};g.beforeActivity=f.beforeActivity||function(){};g.afterActivity=f.afterActivity||function(){};g.destroy=f.destroy||function(){};g.ready=f.ready||function(){};return g};return d});define("wiseindex/lib/sf/activityController",["wiseindex/lib/sf/controller","wiseindex/lib/sf/route"],function(b,l){var a=false;var i="natural";var g={};var h;function k(){var m=this;m.swtichTag="iact"}k.prototype={constructor:k,beforeActivity:function(m){if(m&&m.last&&m.last.path==="base"){h=pageYOffset}},doActivity:function(n){var m=n.last.params,o=n.params,q,p;p=j(o);if(n.last.path===n.path){q=j(m)}return e(p,q,false,n)},destroy:function(m){var n=m.last?j(m.last.params):null;e(null,n,false,m)},ready:function(m){var n=j(m.params);e(n,null,true,m)},pushState:function(n){i="virtual";n=n||{};var m=n.silent===true?true:false;if(!n.activity){return}if(n.activity==="base"){l.push("base")}else{var o=n.state;if(n.activity.indexOf("activity/")<0){n.activity="activity/"+n.activity}if(o){o=n.activity+"="+encodeURIComponent(JSON.stringify(n.state))}else{o=n.activity}l.push("iact",o)}},replaceState:function(q){q=q||{};var t=q.silent===true?true:false;if(!q.activity){return}var p=f();var o=p.match(/(.*?)(iact)\=(.*?)(%3D|$)(.*?)(\&|$)(.*?)$/);var u=actAfter="";var s,n;if(o==null){if(q.activity==="base"){return}else{v(window.location.href+r())}}else{var m=location.protocol+"//"+location.host+location.pathname+location.search;u=o[1];actAfter=o[6]+o[7];if(q.activity==="base"){m+=u+actAfter}else{if(r()==="iact="+o[3]+"%3D"+o[5]){return}m+=u+r()+actAfter}v(m)}function r(){var x=q.state;if(x){x=q.activity+"="+JSON.stringify(q.state)}else{x=q.activity}var w="iact="+encodeURIComponent(x);if(location.href.indexOf("#")===-1){w="#"+w}return w}function v(w){HASH.mute=true;window.location.replace(w);setTimeout(function(){HASH.mute=false},100)}},start:function(){if(!(HASH=B.hash)||a===true){return}var m=this;l.init();l.on("iact",{before:m.beforeActivity,"do":m.doActivity,ready:m.ready,destroy:m.destroy});l.on("base",{"do":function(){$("#page").show();$("#activitystyle").remove()},ready:function(){if(typeof(h)!="undefined"){scrollTo(0,h)}},destroy:function(){$("#page").hide()}});l.start();a=true},back:function(){i="virtual";l.back()}};function f(){var m=location.href.match(/#(.*)$/);var n=m?m[0]:"";if(n.indexOf("#%7C")===0){n=n.replace(/%7C/,"|")}return n||""}function e(q,r,o,n){var m=[];var p=$.Deferred();q&&m.push(q.name);r&&m.push(r.name);if(m.length>0){g={from:{path:n.last?n.last.path:null,params:n.last?j(n.last.params):null},to:{path:n.path,params:j(n.params)},status:n.routeStatus};require(m,function(w,x){var u=[];var s=w===x;if(!x){x=w}var v={routeState:i,routeScope:g};var t=new c();if(!o){if(s){r&&t.push(x.destroy,x,r.state,v);q&&t.push(w.create,w,q.state,v)}else{r&&t.push(x.stop,x,r.state,v);q&&t.push(w.create,w,q.state,v);r&&t.push(x.destroy,x,r.state,v)}}else{q&&t.push(w.start,w,q.state,v);q&&t.push(w.resume,w,q.state,v)}t.push(function(){i="natural";g={}},this);t.excute(p)})}return p}function j(o){var n=/([^=]+)=?(.*)/;var p=o?o.match(n):null;if(p&&p[1]){var m={};m.name=p[1];m.state=p[2]?$.parseJSON(decodeURIComponent(p[2])):undefined;return m}else{return false}}function c(){var o=[],m;function p(q){m=$.Deferred();m.resolve();$.each(o,function(){var r=this;m=m.then(function(){return r()})});o=[];return m.then(function(){q.resolve()})}function n(s,r){var q=(2 in arguments)&&(Array.prototype.slice.call(arguments,2));if(typeof s==="function"){o.push(function(){return s.apply(r,q?q:[])})}}return{push:n,excute:p}}var d=new k();if(!B.activity){B.activity=d}return d});